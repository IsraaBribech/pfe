<div class="enseignant-container">
  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <img src="assets/images/isg.png" alt="Logo ISG EduLink" class="logo">
        <span class="logo-text">ISG EduLink</span>
      </div>
      <!-- Bouton de profil modifié -->
      <button class="profile-button" routerLink="/troixieme-interface/eduprofil">
        <div class="enseignant-avatar">{{ etudiantName[0] }}</div>
        <div class="enseignant-details">
          <h3>{{ etudiantName }}</h3>
          <p>{{ etudiantEmail }}</p>
        </div>
      </button>
    </div>
    <nav class="sidebar-nav">
      <ul>
        <li routerLink="/troixieme-interface" routerLinkActive="active">
          <i class="fas fa-home"></i>
          <span>Tableau de bord</span>
        </li>
        <li routerLink="/troixieme-interface/cour-suivie" routerLinkActive="active">
          <i class="fas fa-book"></i>
          <span>Mes cours</span>
        </li>
        <li routerLink="/troixieme-interface/devoir-realiser" routerLinkActive="active">
          <i class="fas fa-tasks"></i>
          <span>Mes devoirs</span>
        </li>
        <li routerLink="/troixieme-interface/quiz-repond" routerLinkActive="active">
          <i class="fas fa-question-circle"></i>
          <span>Mes quiz</span>
        </li>
        <li routerLink="/troixieme-interface/message-envoyer" routerLinkActive="active">
          <i class="fas fa-envelope"></i>
          <span>Forum de discussion</span>
        </li>
      </ul>
    </nav>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="content-header">
      <div class="header-title">
        <h1>Mes cours</h1>
      </div>
      <div class="header-actions">
        <div class="search-bar">
          <i class="fas fa-search"></i>
          <input type="text" placeholder="Rechercher un cours...">
        </div>
        <app-notification></app-notification>
      </div>
    </div>

    <!-- Contenu principal -->
    <div class="cours-container">
      <!-- Si aucune matière n'est sélectionnée, afficher la liste des matières -->
      <div *ngIf="!selectedMatiere" class="matieres-section">
        <!-- Onglets des semestres -->
        <div class="semester-tabs">
          <div class="tab" [class.active]="activeSemester === 'semestre1'" (click)="changeSemester('semestre1')">
            <i class="fas fa-calendar-alt"></i>
            <span>Semestre 1</span>
          </div>
          <div class="tab" [class.active]="activeSemester === 'semestre2'" (click)="changeSemester('semestre2')">
            <i class="fas fa-calendar-alt"></i>
            <span>Semestre 2</span>
          </div>
        </div>
        
        <!-- Matières du Semestre 1 -->
        <div class="semester-content" *ngIf="activeSemester === 'semestre1'">
          <div class="matieres-grid">
            <div class="matiere-card" *ngFor="let matiere of matieresSemestre1" (click)="selectMatiere(matiere)">
              <div class="matiere-header" [style.background-color]="matiere.couleur">
                <div class="matiere-icon">
                  <i class="fas" [class]="matiere.icon"></i>
                </div>
              </div>
              <div class="matiere-body">
                <h3>{{ matiere.nom }}</h3>
                <div class="matiere-info">
                  <div class="info-item">
                    <i class="fas fa-user-tie"></i>
                    <span>{{ matiere.enseignant }}</span>
                  </div>
                  <div class="info-item">
                    <i class="fas fa-building"></i>
                    <span>{{ matiere.departement }}</span>
                  </div>
                  <div class="info-row">
                    <div class="info-col">
                      <span class="info-label">Crédits</span>
                      <span class="info-value">{{ matiere.credits }}</span>
                    </div>
                    <div class="info-col">
                      <span class="info-label">Heures</span>
                      <span class="info-value">{{ matiere.heures }}</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="matiere-footer">
                <button class="btn-outline">
                  <i class="fas fa-eye"></i> Voir les chapitres
                </button>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Matières du Semestre 2 -->
        <div class="semester-content" *ngIf="activeSemester === 'semestre2'">
          <div class="matieres-grid">
            <div class="matiere-card" *ngFor="let matiere of matieresSemestre2" (click)="selectMatiere(matiere)">
              <div class="matiere-header" [style.background-color]="matiere.couleur">
                <div class="matiere-icon">
                  <i class="fas" [class]="matiere.icon"></i>
                </div>
              </div>
              <div class="matiere-body">
                <h3>{{ matiere.nom }}</h3>
                <div class="matiere-info">
                  <div class="info-item">
                    <i class="fas fa-user-tie"></i>
                    <span>{{ matiere.enseignant }}</span>
                  </div>
                  <div class="info-item">
                    <i class="fas fa-building"></i>
                    <span>{{ matiere.departement }}</span>
                  </div>
                  <div class="info-row">
                    <div class="info-col">
                      <span class="info-label">Crédits</span>
                      <span class="info-value">{{ matiere.credits }}</span>
                    </div>
                    <div class="info-col">
                      <span class="info-label">Heures</span>
                      <span class="info-value">{{ matiere.heures }}</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="matiere-footer">
                <button class="btn-outline">
                  <i class="fas fa-eye"></i> Voir les chapitres
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Si une matière est sélectionnée, afficher les chapitres -->
      <div *ngIf="selectedMatiere" class="chapitres-section">
        <div class="section-header">
          <div class="back-button" (click)="backToMatieres()">
            <i class="fas fa-arrow-left"></i>
            <span>Retour aux matières</span>
          </div>
          <h2>{{ selectedMatiere.nom }}</h2>
        </div>

        <div class="matiere-details">
          <div class="matiere-info-card" [style.border-left-color]="selectedMatiere.couleur">
            <div class="matiere-info-header">
              <div class="matiere-icon-large" [style.background-color]="selectedMatiere.couleur">
                <i class="fas" [class]="selectedMatiere.icon"></i>
              </div>
              <div class="matiere-info-content">
                <h3>{{ selectedMatiere.nom }}</h3>
                <div class="matiere-meta">
                  <div class="meta-item">
                    <i class="fas fa-user-tie"></i>
                    <span>{{ selectedMatiere.enseignant }}</span>
                  </div>
                  <div class="meta-item">
                    <i class="fas fa-building"></i>
                    <span>{{ selectedMatiere.departement }}</span>
                  </div>
                  <div class="meta-item">
                    <i class="fas fa-clock"></i>
                    <span>{{ selectedMatiere.heures }} heures</span>
                  </div>
                  <div class="meta-item">
                    <i class="fas fa-award"></i>
                    <span>{{ selectedMatiere.credits }} crédits</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="chapitres-list">
          <h3 class="chapitres-title">Chapitres du cours</h3>
          
          <div class="chapitre-card" *ngFor="let chapitre of selectedMatiere.chapitres">
            <div class="chapitre-header">
              <div class="chapitre-number">
                <span>{{ selectedMatiere.chapitres.indexOf(chapitre) + 1 }}</span>
              </div>
              <h4>{{ chapitre.titre }}</h4>
            </div>
            <div class="chapitre-body">
              <p>{{ chapitre.description }}</p>
              <div class="chapitre-meta">
                <div class="meta-item">
                  <i class="fas fa-calendar-alt"></i>
                  <span>Publié le {{ formatDate(chapitre.dateCreation) }}</span>
                </div>
                <div class="meta-item">
                  <i class="fas fa-file-pdf"></i>
                  <span>{{ getFileSize(chapitre) }}</span>
                </div>
              </div>
            </div>
            <div class="chapitre-footer">
              <a href="{{ chapitre.fichierPdf }}" target="_blank" class="btn-download">
                <i class="fas fa-download"></i> Télécharger le PDF
              </a>
              <button class="btn-view">
                <i class="fas fa-eye"></i> Voir en ligne
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>